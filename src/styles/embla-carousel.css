@layer components {
    .embla {
        @apply w-full mx-auto relative;
        max-width: 100vw;
        overflow: hidden;
        contain: strict;
        content-visibility: auto;
    }

    .embla__viewport {
        @apply overflow-hidden;
        width: 100%;
    }

    .embla__container {
        @apply flex;
        touch-action: pan-y pinch-zoom;
        margin-left: 0;
        backface-visibility: hidden;
        transform: translate3d(0, 0, 0);
    }

    .embla--dragging .embla__container {
        will-change: transform;
    }

    .embla__slide {
        @apply shrink-0 grow-0 min-w-0 relative;
        transform: translate3d(0, 0, 0);
        /* background-color: #fff; */
        flex: 0 0 90%;
        min-width: 0;
        height: 100%;
        margin-right: 1rem;
        backface-visibility: hidden;
    }

    .embla__slide__img {
        @apply w-full h-full block;
        object-fit: cover;
        object-position: center;
        -webkit-mask-image: -webkit-radial-gradient(white, black);
        mask-image: radial-gradient(white, black);
    }

    .embla__controls {
        @apply absolute inset-0 pointer-events-none;
    }

    .embla__buttons {
        @apply absolute inset-y-0 left-1 right-1 flex items-center justify-between;
        @apply z-10;
        @apply pointer-events-none;
    }

    .embla__buttons > button {
        @apply pointer-events-auto;
    }

    .embla__button {
        @apply inline-flex items-center justify-center;
        @apply w-12 h-12 rounded-full;
        @apply bg-white/90 backdrop-blur-sm;
        @apply text-vico-gray-600 cursor-pointer;
        @apply transition-all duration-300;
        @apply hover:bg-white hover:text-vico-green;
        @apply shadow-lg;
        /* @apply focus:outline-none focus:ring-2 focus:ring-white/50; */
        @apply disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        -webkit-appearance: none;
        appearance: none;
        touch-action: manipulation;
    }

    .embla__button__svg {
        @apply w-[35%] h-[35%];
    }

    .embla__dots {
        @apply absolute bottom-4! left-1/2 -translate-x-1/2;
        @apply flex items-center pointer-events-auto;
    }

    .embla__dot {
        @apply w-6 h-6 flex items-center justify-center;
        @apply rounded-full cursor-pointer;
        @apply transition-all duration-200;
        @apply focus:outline-none;
        @apply p-0 m-0;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        -webkit-appearance: none;
        appearance: none;
        touch-action: manipulation;
    }

    .embla__dot::after {
        @apply w-1 h-1 rounded-full;
        @apply bg-white/60;
        @apply transition-all duration-300;
        content: "";
        display: block;
    }

    .embla__dot--selected::after {
        @apply w-2.5 h-2.5 bg-white;
    }

    @media (min-width: 1024px) {
        .embla__slide {
            flex: 0 0 100%;
            margin-right: 0;
        }
    }

    @media (max-width: 1023px) {
        .embla {
            padding-left: 0 !important;
            padding-right: 0 !important;
        }
        .embla__slide {
            margin-left: 0.5rem;
            margin-right: 0.5rem;
        }
        .embla__slide__img {
            border-radius: 12px;
        }
        .embla__button,
        .embla__dots {
            display: none;
        }
    }

    @media (max-width: 767px) {
        .embla__slide__img {
            border-radius: 8px;
        }
        .embla__slide {
            margin-left: 0.25rem;
            margin-right: 0.25rem;
        }
    }
    /* ========================================
       ABOUT US CAROUSEL
       ======================================== */

    .about-us-carousel-container {
        @apply w-full mx-auto overflow-hidden;
        /* Mobile Aspect Ratio: 375 / 156 */
        aspect-ratio: 375 / 156;
    }

    @media (min-width: 1024px) {
        .about-us-carousel-container {
            max-width: 1216px; /* Source Standard Safe Zone */
            /* Desktop Aspect Ratio: 1216 / 280 (~4.34) */
            aspect-ratio: 1216 / 280;
            @apply rounded-xl;
        }
    }

    .about-us-carousel {
        @apply w-full h-full;
    }

    .about-us-carousel .embla__slide__img {
        object-fit: cover;
    }

    .about-us-carousel .embla__dots {
        @apply flex gap-2 justify-center;
        /* Custom override for About Us dots if needed, inheriting base .embla__dots */
    }

    /* 
       Hero & About Us Carousel Specific Styles for Progress Dots 
       User Request: Dot loading theo th·ªùi gian (progress bar style)
    */
    .hero-carousel .embla__dots,
    .about-gallery-carousel .embla__dots {
        @apply flex gap-2 justify-center absolute z-10;
        bottom: 20px;
    }

    .hero-carousel .embla__dot,
    .about-gallery-carousel .embla__dot {
        @apply w-1.5 h-1.5 rounded-full bg-white/50 border-none cursor-pointer p-0 relative overflow-hidden;
        transition: width 0.3s ease;
    }

    .hero-carousel .embla__dot--selected,
    .about-gallery-carousel .embla__dot--selected {
        @apply w-[30px] bg-white/30;
    }

    .hero-carousel .embla__dot--selected::after,
    .about-gallery-carousel .embla__dot--selected::after {
        content: "";
        @apply absolute top-0 left-0 h-full w-0 bg-white rounded-full;
        animation: progress-fill 4s linear forwards;
    }

    @keyframes progress-fill {
        0% {
            width: 0%;
        }
        100% {
            width: 100%;
        }
    }

    /* FadeSlider Progress Animation */
    @keyframes fadeSliderProgress {
        from {
            width: 0%;
        }
        to {
            width: 100%;
        }
    }
}
